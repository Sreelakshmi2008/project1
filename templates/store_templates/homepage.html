{% load static %}
<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>Eflyer</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
      <!-- Font Icon -->
      <link rel="stylesheet" href="{% static 'fonts\material-icon\css\material-design-iconic-font.min.css' %}">
  
      <!-- signup form css -->
      <link rel="stylesheet" href="{% static 'signup/css/style.css' %}">
      <!-- bootstrap css -->
      <link rel="stylesheet" type="text/css" href="{% static 'homepage/css/bootstrap.min.css' %}">
      <!-- style css -->
      <link rel="stylesheet" type="text/css" href="{% static 'homepage/css/style.css' %}">
      <!-- Responsive-->
      <link rel="stylesheet" href="{% static 'homepage/css/responsive.css' %}">
      <!-- fevicon -->
      <link rel="icon" href="{% static 'homepage/images/fevicon.png' %}" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="{% static 'homepage/css/jquery.mCustomScrollbar.min.css' %}">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <!-- fonts -->
      <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
      <!-- font awesome -->
      <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
      <!--  -->
      <!-- owl stylesheets -->
      <link href="https://fonts.googleapis.com/css?family=Great+Vibes|Poppins:400,700&display=swap&subset=latin-ext" rel="stylesheet">
      <link rel="stylesheet" href="{% static 'homepage/css/owl.carousel.min.css' %}">
      <link rel="stylesoeet" href="{% static 'homepage/css/owl.theme.default.min.css'%}">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">


      <!-- zoom images css and js  -->
      <link href="{% static 'homepage/css/zoom.css' %}" rel="stylesheet">
     
   </head>
   <body>
      
      <!-- banner bg main start -->
      <div class="banner_bg_main">
         
        
         <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
               <a class="navbar-brand" href="{% url 'homepage' %}">
                <img src="{% static 'homepage\images\Black logo - no background.png' %}" class="img-fluid" style="height:80px">
               </a>
            </div>
               
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="col-sm-8">
               <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                     <button class="btn btn-secondary dropdown-toggle mr-2" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">All Category 
                     </button>
                     <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        {% for sub in sub %}
                        <a class="dropdown-item" href="{% url 'subcategory_filtering' sub.id %}">{{sub.name}}</a>
                        {% endfor %}
                        <!-- <a class="dropdown-item" href="#">Ladies pants</a>
                        <a class="dropdown-item" href="#">Gents pants</a>
                        <a class="dropdown-item" href="#">Gents pants</a> -->
                     </div>
                  
                  <a class="nav-link active mr-2" href="{% url 'menscollection' %}">Mens Collection</a>

                  <a class="nav-link active mr-2" href="{% url 'womencollection' %}">Ladies collection</a>
                  
                  <a class="nav-link active mr-2" href="#">Trending collections</a>
                  
                  <a href="{% url 'cart' %}" class="mr-3 pt-1">
                     <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                     <span class="padding_5">Cart</span></a>
               
                  {% if user.is_authenticated %}
                  <a href="{% url 'userprofile' %}" class="nav-link active mr-3">Hi,{{name}}</a>
                  <a href="{% url 'signout' %}" class="nav-link active mr-3">Signout</a>
                  
                  {% else %}
                  <button class="btn btn-secondary mr-3">
                     <a href="{% url 'signup' %}" style="color: white;">Register |</a>
                     <a href="{% url 'signin' %}" style="color: white;">Signin</a>
                  </button>
                  {% endif %}
                 
                </div>
               </div>
              </div>
            
          </nav>
        {% block content %}
       
      
      <!-- banner bg main end -->
      <div class="container mt-5">
         <div class="row align-items-center">
           <div class="col-6">
             <img src="{% static 'homepage\images\Untitled.jpg' %}" class="" alt="Circular Image">
           </div>
           <div class="col mb-5" style="right: 60px;">
             <p class="text-dark" style="font-size: 50px; line-height: 70px;font-family:Georgia, 'Times New Roman', Times, serif;">Your choice,is always an exception</p>
           </div>
         </div>
      </div>


      <!-- fashion section start -->
      <div class="fashion_section">
         <h1 class="fashion_taital pt-5">New Collections</h1>
         <div id="main_slider" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
               <div class="carousel-item active">
                  <div class="container">
                     <div class="fashion_section_2">
                        <div class="row">
                           {% for product in product %}
                           
                           <div class="col-lg-4 col-sm-4">
                              <div class="box_main">
                                 <h4 class="shirt_text">{{product.name}}</h4>
                                 <h4 class="shirt_text">{{product.description}}</h4>
                                 <p class="price_text"><span style="color: #262626;">₹{{product.productvariant.first.price}}</span></p>
                                 <div class="tshirt_img">
                                    <a href="{% url 'product_details' product.id %}">
                                    <img src="{{ MEDIA_URL }}{{ product.productcolor.first.color_image.url }}" alt="not working" >
                                    </a>
                                 </div>
                                 <div class="btn_main">
                                    <div class="buy_bt"><a href="#">Buy Now</a></div>
                                    <div class="seemore_bt"><a href="{% url 'product_details' product.id %}">See More</a></div>
                                 </div>
                              </div>
                           </div>
                           {% endfor %}
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <a class="carousel-control-prev" href="#main_slider" role="button" data-slide="prev">
            <i class="fa fa-angle-left"></i>
            </a>
            <a class="carousel-control-next" href="#main_slider" role="button" data-slide="next">
            <i class="fa fa-angle-right"></i>
            </a>
         </div>
      </div>
      <!-- fashion section end -->
    
{% endblock content %}



      <!-- footer section start -->
      <div class="footer_section layout_padding">
        
            <div class="footer_menu">
               <ul>
                  <li><a href="#">Best Sellers</a></li>
                  <li><a href="#">Gift Ideas</a></li>
                  <li><a href="#">New Releases</a></li>
                  <li><a href="#">Today's Deals</a></li>
                  <li><a href="#">Customer Service</a></li>
               </ul>
            </div>
            <div class="location_main">Help Line  Number : <a href="#">+1 1800 1200 1200</a></div>
         
      </div>
      <!-- footer section end -->


      <!-- copyright section start -->
      <div class="copyright_section">
         <div class="container">
            <p class="copyright_text">© 2023 All Rights Reserved. </p>
         </div>
      </div>
      <!-- copyright section end -->



      <!-- Javascript files-->
      <script src="{% static 'homepage/js/jquery.min.js' %}"></script>
      <script src="{% static 'homepage/js/popper.min.js' %}"></script>
      <script src="{% static 'homepage/js/bootstrap.bundle.min.js' %}"></script>
      <script src="{% static 'homepage/js/jquery-3.0.0.min.js' %}"></script>
      <script src="{% static 'homepage/js/plugin.js' %}"></script>

      <script src="{% static 'homepage/js/zoom.js' %}"></script>
      <!-- sidebar -->
      <script src="{% static 'homepage/js/jquery.mCustomScrollbar.concat.min.js' %}"></script>
      <script src="{% static 'homepage/js/custom.js' %}"></script>


      <script>
         function openNav() {
           document.getElementById("mySidenav").style.width = "250px";
         }
         
         function closeNav() {
           document.getElementById("mySidenav").style.width = "0";
         }
      </script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
        <script src="{% static 'signup/vendor\jquery\jquery.min.js' %}"></script>
        <script src="{% static 'signup/js\main.js' %}"></script>




        <script>
        // change image in individual product page  while clicking
         function change_image(image){
            var container = document.getElementById("main-image");
            container.src = image.src;
            var selectedcolor = document.getElementById("selectedcolor");
               selectedcolor.value= image.dataset.color;
         }



         // show correct price when user select a size
         function get_correct_prize(price){
            var pricecontainer = document.getElementById("current_price");
            pricecontainer.textContent = price;
            
               var selectedprice = document.getElementById("selectedprice");
               selectedprice.value = price;
            
            var selectedSizeInput = document.querySelector('input[name="size"]:checked');
               if (selectedSizeInput) {
               // var addToCartButton = document.getElementsByClassName("addToCartButton");
               // addToCartButton.dataset.size = selectedSizeInput.dataset.size;
               var selectedSize = document.getElementById("selectedsize")
               selectedSize.value = selectedSizeInput.dataset.size;
               }
         }


         // Function to increment the quantity
         function incrementQuantity(max) {
            var value = parseInt(document.getElementById('quantity').value, 10);
            value = isNaN(value) ? 0 : value;
            if( value < max){
               
               value++;

            }
            document.getElementById('quantity').value = value;
            var selectedquantityInput = document.getElementById("selectedquantity")
         selectedquantityInput.value = document.getElementById('quantity').value
         console.log(selectedquantityInput.value)
       }

       
       
         // Function to decrement the quantity
         function decrementQuantity() {
            var value = parseInt(document.getElementById('quantity').value, 10);
            value = isNaN(value) ? 0 : value;
            if (value > 1){
               value--;
            }
            
            document.getElementById('quantity').value = value;
           
       }
       
        
      //  add to cart button ajax
       $(".addToCartButton").on('click', function() {
            console.log("add to cart button clicked")

            var productid = document.getElementById("productid").value;
            var selectedcolor = document.getElementById("selectedcolor").value;
            var selectedsize = document.getElementById("selectedsize").value;
            var selectedprice = document.getElementById("selectedprice").value;
            var selectedquantity = document.getElementById("quantity").value;
          
            console.log(productid)

            data = {"productid" : productid,"selectedcolor":selectedcolor,"selectedsize":selectedsize,"selectedprice":selectedprice,"selectedquantity":selectedquantity}

            $.ajax({
               url:"{% url 'add_to_cart' %}",
               method:"GET",
               data:data,

               success: function(data) {
                  console.log("code run success")
                  console.log(data.status)
                  console.log(data.message)
               }
            })

         })
         document.addEventListener("DOMContentLoaded", function(event) {});
       
 </Script>


 <!--    <script>
        // Function to increment the quantity
        function incrementQuantity(productId) {
         console.log(productId)
          var quantityField = document.getElementById('quantity');
          console.log(quantityField.value)
          quantityField.value = parseInt(quantityField.value);
          var max = document.getElementById('pdt-stock').value
          if (quantityField.value < max){
            quantityField.value = parseInt(quantityField.value) + 1;
          }
        }
      
        // Function to decrement the quantity
        function decrementQuantity(productId) {
          var quantityField = document.getElementById('quantity');
          if (parseInt(quantityField.value) > 1) {
            quantityField.value = parseInt(quantityField.value) - 1;
          }
        }
        document.addEventListener("DOMContentLoaded", function(event) {});
       
      </script> -->

   </body>
</html>